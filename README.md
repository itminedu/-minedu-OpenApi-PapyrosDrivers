minedu-OpenApi-PapyrosDrivers
=============================

 

Τεκμηρίωση API Βιβλιοθήκης για την χρήση των υπηρεσιών ηλεκτρονικού πρωτοκόλλου
-------------------------------------------------------------------------------

 

Σκοπός
------

 

Η βιβλιοθήκη επιτρέπει την χρήση των υπηρεσιών πρωτοκόλλησης του υπουργείου
Παιδείας. Ακολουθεί τεκμηρίωση της βιβλιοθήκης, καθώς και των παρεχόμενων
υπηρεσιών.

 

Υπηρεσίες Πρωτοκόλλησης
-----------------------

 

Οι υπηρεσίες πρωτοκόλλησης του Υπουργείου Παιδείας, ακολουθούν την λογική
**REST**, και για τη χρήση τους απαιτείται η αποστολή κατάλληλα διαμορφωμένων
HTTP αιτημάτων. Αναλυτικό Documentation καθώς και δοκιμαστικές κλήσεις των
υπηρεσιών, μπορεί κάποιος να βρει, στο
https://protocoltest.minedu.gov.gr/openpapyros/

 

### Υποστηριζόμενες μορφές μηνυμάτων

 

Το κύριο format που υποστηρίζεται για την υποβολή κλήσεων προς το API είναι το
JSON.

 

### Δείγματα client κώδικα

 

Δείγματα κώδικα διεπαφής είναι ενσωματωμένα στην βιβλιοθήκη.

 

### Δοκιμαστικοί χρήστες

 

Στοιχεία χρηστών με τα οποία μπορούν να γίνουν κλήσεις προς τις υπηρεσίες
πρωτοκόλου είναι :

| username | password |
|----------|----------|
| test     | 123456   |

 

Το senderId του test χρήστη είναι 100000001

### Εξέλιξη του API και ενημερώσεις

Σε όσες περιπτώσεις κρίνεται απολύτως απαραίτητο, θα πραγματοποιούνται
αναβαθμίσεις στο API οι οποίες ενδέχεται να επηρεάσουν τη λειτουργία των
συστημάτων που αλληλεπιδρούν με αυτό.

 

 

Api Υπηρεσιών

### *Πρωτοκόλληση Εγγράφου*

**Input Values**

 

| **Πεδίο**                        | **Τύπος**          | **Υποχρεωτική Τιμή** |
|----------------------------------|--------------------|----------------------|
| ID Αποστολέα (Λίστα αποστολέων)  | Αριθμητικό         | χ                    |
| Αριθμός Πρωτοκόλλου Αποστολέα    | Αλφαριθμητικό(50)  |                      |
| Ημερομηνία Πρωτοκόλλου Αποστολέα | Ημερομηνία         |                      |
| Κατηγορία Εγγράφου (Λίστα τιμών) | Αριθμητικό         |                      |
| Θέμα                             | Αλφαριθμητικό(200) | χ                    |
| ΑΔΑ                              | Αλφαριθμητικό(50)  |                      |
| Συνημμένα Περιγραφή              | Αλφαριθμητικό(200) |                      |
| Συνημμένα Αρχεία Εγγράφων        | Λίστα αρχείων      |                      |

 

**Output Values**

Αριθμός Πρωτοκόλλου/Έτος, hash ID εγγράφου

 

 

### *Αναζήτηση Εγγράφων*

 

**Input Values**

| **Πεδίο**                                    | **Τύπος**  | **Υποχρεωτική Τιμή** |
|----------------------------------------------|------------|----------------------|
| ID Αποστολέα (Λίστα αποστολέων)              | Αριθμητικό | χ                    |
| Ημερομηνία Από                               | Ημερομηνία |                      |
| Ημερομηνία Έως                               | Ημερομηνία |                      |
| Τύπος Εγγράφου (1 Εισερχόμενο, 2 Εξερχόμενο) | Αριθμητικό |                      |

 

**Output Values**

 

Λίστα από hash ID εγγράφων

 

### *Στοιχεία Εγγράφου*

 

**Input Values**

 

hash ID εγγράφου

 

**Output Values**

 

| **Πεδίο**                                    | **Τύπος**                  | **Εις** | Εξ |
|----------------------------------------------|----------------------------|---------|----|
| Αριθμός Πρωτοκόλλου                          | Αριθμητικό                 | χ       | χ  |
| Ημερομηνία Πρωτοκόλλου                       | Ημερομηνία                 | χ       | χ  |
| Τύπος Εγγράφου (1 Εισερχόμενο, 2 Εξερχόμενο) | Αριθμητικό                 | χ       | χ  |
| ID Αποστολέα (Λίστα αποστολέων)              | Αριθμητικό                 | χ       |    |
| Ημερομηνία Πρωτοκόλλου Αποστολέα             | Ημερομηνία                 | χ       |    |
| Κατηγορία Εγγράφου (Λίστα τιμών)             | Αριθμητικό                 | χ       | χ  |
| Θέμα                                         | Αλφαριθμητικό(200)         | χ       | χ  |
| ΑΔΑ                                          | Αλφαριθμητικό(50)          | χ       | χ  |
| Συνημμένα Περιγραφή                          | Αλφαριθμητικό(200)         | χ       | χ  |
| Δ/νση Παραγωγής                              | Αλφαριθμητικό(200)         |         | χ  |
| Συνημμένα                                    | λίστα από hash ID εγγράφων |         |    |

 

### *Εμφάνιση Εγγράφου ως PDF*

 

**Input Values**

hash ID Εγγράφου

 

**Output Values**

Το έγγραφο ως PDF αν είναι γνωστός τύπος αλλιώς το πρωτογενές έγγραφο

 

 

Δοκιμάστικα Request για το περιβάλλον δοκιμών
---------------------------------------------

 

Url : https://protocoltest.minedu.gov.gr/openpapyros/

 

### Υπηρεσία authenticate

/pauthenticate/pauth

 

Request

{

"username": "test",

"password": "123456"

}

Curl

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
curl -X PUT --header 'Content-Type: application/json' --header 'Accept: application/json' -d '{
  "username": "test",
  "password": "123456"
}' 'https://protocoltest.minedu.gov.gr:443/openpapyros/api/pauthenticate/pauth'
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

Response

{ "apiKey":
"eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIxMDAwMDAwIn0.ac5cS-vcVmBLO9zdY3zn1MF-UznrG\_JpkEyWPyL3GvE"
}

 

 

### Υποβολή Εγγράφου

/protocol/submit

 

Request

{

"senderId": 100000003,

"senderProtocol": "string",

"senderProtocolDate": "10/10/2017",

"docCategory":20,

"theme": "string",

"ada": "string",

"description": "string",

"mainDoc": {

"document": {

"base64": "zpXOr869zrHOuSDOvM65zrEgzrTOv866zrnOvM6uIA=="

},

"fileName": "string",

"description": "string"

},

"attachedDoc": [

{

"document": {

"base64": "zpXOr869zrHOuSDOvM65zrEgzrTOv866zrnOvM6uIA=="

},

"fileName": "string",

"description": "string"

}

]

}

 

Curl

 

~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
curl -X POST --header 'Content-Type: application/json' --header 'Accept: application/json' --header 'api_key: eyJhbGciOiJIUzI1NiJ9.eyJqdGkiOiIxMDAwMDAwIn0.ac5cS-vcVmBLO9zdY3zn1MF-UznrG_JpkEyWPyL3GvE' -d '{
  "senderId": 100000003,
  "senderProtocol": "string",
  "senderProtocolDate": "10/10/2017",
  "docCategory":20,
  "theme": "string",
  "ada": "string",
  "description": "string",
  "mainDoc": {
    "document": {
      "base64": "zpXOr869zrHOuSDOvM65zrEgzrTOv866zrnOvM6uIA=="
    },
    "fileName": "string",
    "description": "string"
  },
  "attachedDoc": [
    {
      "document": {
        "base64": "zpXOr869zrHOuSDOvM65zrEgzrTOv866zrnOvM6uIA=="
      },
      "fileName": "string",
      "description": "string"
    }
  ]
}' 'https://protocoltest.minedu.gov.gr:443/openpapyros/api/protocol/submit'
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

 

 

Response

 

{ "docId": "oXmDQDm1h4GQ3%2Bw%2BWly6iw%3D%3D", "protocolYear": 2016,
"protocolDate": "18/10/2016", "protocolNumber": "157", "attachments": [ {
"docId": "tM8P%2BIxE%2FdTXk%2FjIw2qrbA%3D%3D", "description": "" } ] }
